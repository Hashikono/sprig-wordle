/*
@title: wordle
@description: ""
@author: hashikono
@tags: ['puzzle']
@addedOn: 2025-00-00
*/

// letter sprites (capital letters)
const la = "A";
const lb = "B";
const lc = "C";
const ld = "D";
const le = "E";
const lf = "F";
const lg = "G";
const lh = "H";
const li = "I";
const lj = "J";
const lk = "K";
const ll = "L";
const lm = "M";
const ln = "N";
const lo = "O";
const lp = "P";
const lq = "Q";
const lr = "R";
const ls = "S";
const lt = "T";
const lu = "U";
const lv = "V";
const lw = "W";
const lx = "X";
const ly = "Y";
const lz = "Z";

// default letters (lowercase letters)
const dfa = "a";
const dfb = "b";
const dfc = "c";
const dfd = "d";
const dfe = "e";
const dff = "f";
const dfg = "g";
const dfh = "h";
const dfi = "i";
const dfj = "j";
const dfk = "k";
const dfl = "l";
const dfm = "m";
const dfn = "n";
const dfo = "o";
const dfp = "p";
const dfq = "q";
const dfr = "r";
const dfs = "s";
const dft = "t";
const dfu = "u";
const dfv = "v";
const dfw = "w";
const dfx = "x";
const dfy = "y";
const dfz = "z";

//backspace
const red = "~";

//background/functionality
const selector = "-";
const grey = "_";
const yellow = "+";
const green = "=";
const backgroundGrey = ";";

//data var
const wordList = [
  "aback", "adobe", "agape", "axiom", "azure", "banjo", "bough", "cairn", "cavil", "cynic",
  "droit", "eclat", "fetid", "fjord", "gauze", "ghoul", "glyph", "hertz", "inane", "jaunt",
  "jazzy", "jiffy", "junta", "karma", "kiosk", "knoll", "lemur", "midge", "nymph", "oxide",
  "pique", "quark", "slyly", "tithe", "vexed", "wharf", "xenon", "zesty",
  "bring", "write", "leave", "close", "drive", "share", "clear", "class", "table", "chair",
  "peace", "happy", "sleep", "dream", "smile", "alone", "quiet", "quick", "brave", "proud",
  "sweet", "fresh", "spice", "crisp", "storm", "cloud", "rainy", "sunny", "windy", "shine",
  "night", "early", "later", "month", "yearn", "given", "taken", "build", "break", "touch",
  "trace", "train", "plane", "truck", "river", "ocean", "beach", "grass", "field", "north",
  "south", "lunch", "snack", "fruit", "bread", "salty", "sauce", "honey", "cocoa", "apple",
  "grape", "lemon", "mango", "peach", "berry", "chess", "cards", "dance", "party", "movie",
  "novel", "piano", "viola", "paint", "color", "black", "white", "green", "brown", "robot",
  "cable", "mouse", "phone", "timer", "clock", "speed", "angle", "equal", "value", "logic",
  "array", "stack", "queue", "input", "print", "float", "grade", "score", "reply", "email",
  "files", "notes", "begin", "catch", "throw", "carry", "spare", "spend", "count", "claim",
  "adopt", "raise"
];
let word = wordList[Math.floor(Math.random() * 150)];
let wordInput = "";
let inputCol = 0;

//sprite images
setLegend(
  [selector, bitmap`
0000........0000
0000........0000
00............00
00............00
................
................
................
................
................
................
................
................
00............00
00............00
0000........0000
0000........0000`],
  [la, bitmap`
  ................
  ................
  .......222......
  ......22222.....
  .....22..22.....
  .....22..22.....
  ....22....22....
  ....22222222....
  ....22222222....
  ...22......22...
  ...22......22...
  ..22........22..
  ..22........22..
  ................
  ................
  ................`],
  [lb, bitmap`
  ................
  ................
  ....222222......
  ....2222222.....
  ....22....22....
  ....22....22....
  ....2222222.....
  ....2222222.....
  ....22....22....
  ....22....22....
  ....22....22....
  ....2222222.....
  ....222222......
  ................
  ................
  ................`],
  [lc, bitmap`
  ................
  ................
  .....222222.....
  ....2222222.....
  ....22..........
  ....22..........
  ....22..........
  ....22..........
  ....22..........
  ....22..........
  ....2222222.....
  .....222222.....
  ................
  ................
  ................
  ................`],
  [ld, bitmap`
  ................
  ................
  ....222222......
  ....2222222.....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....2222222.....
  ....222222......
  ................
  ................
  ................`],
  [le, bitmap`
  ................
  ................
  ....22222222....
  ....22222222....
  ....22..........
  ....22..........
  ....2222222.....
  ....2222222.....
  ....22..........
  ....22..........
  ....22..........
  ....22222222....
  ....22222222....
  ................
  ................
  ................`],
  [lf, bitmap`
  ................
  ................
  ....22222222....
  ....22222222....
  ....22..........
  ....22..........
  ....2222222.....
  ....2222222.....
  ....22..........
  ....22..........
  ....22..........
  ....22..........
  ....22..........
  ................
  ................
  ................`],
  [lg, bitmap`
  ................
  ................
  .....222222.....
  ....2222222.....
  ....22..........
  ....22..........
  ....22..........
  ....22..22222...
  ....22..22222...
  ....22....22....
  ....22222222....
  .....222222.....
  ................
  ................
  ................
  ................`],
  [lh, bitmap`
  ................
  ................
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22222222....
  ....22222222....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ................
  ................
  ................`],
  [li, bitmap`
  ................
  ................
  ......2222......
  ......2222......
  ........22......
  ........22......
  ........22......
  ........22......
  ........22......
  ........22......
  ......2222......
  ......2222......
  ................
  ................
  ................
  ................`],
  [lj, bitmap`
  ................
  ................
  ........2222....
  ........2222....
  ..........22....
  ..........22....
  ..........22....
  ..........22....
  ..........22....
  ....22....22....
  ....2222222.....
  .....222222.....
  ................
  ................
  ................
  ................`],
  [lk, bitmap`
  ................
  ................
  ....22....22....
  ....22...22.....
  ....22..22......
  ....22.22.......
  ....2222........
  ....2222........
  ....22.22.......
  ....22..22......
  ....22...22.....
  ....22....22....
  ....22.....22...
  ................
  ................
  ................`],
  [ll, bitmap`
  ................
  ................
  ....22..........
  ....22..........
  ....22..........
  ....22..........
  ....22..........
  ....22..........
  ....22..........
  ....22..........
  ....22..........
  ....22222222....
  ....22222222....
  ................
  ................
  ................`],
  [lm, bitmap`
  ................
  ................
  ...22......22...
  ...222....222...
  ...2222..2222...
  ...22.22.22.22..
  ...22..2222..22.
  ...22..2222..22.
  ...22...22...22.
  ...22........22.
  ...22........22.
  ...22........22.
  ...22........22.
  ................
  ................
  ................`],
  [ln, bitmap`
  ................
  ................
  ....22....22....
  ....222...22....
  ....2222..22....
  ....22.22.22....
  ....22..2222....
  ....22..2222....
  ....22...222....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ................
  ................
  ................`],
  [lo, bitmap`
  ................
  ................
  .....222222.....
  ....2222222.....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....2222222.....
  .....222222.....
  ................
  ................
  ................
  ................`],
  [lp, bitmap`
  ................
  ................
  ....2222222.....
  ....22222222....
  ....22....22....
  ....22....22....
  ....22222222....
  ....2222222.....
  ....22..........
  ....22..........
  ....22..........
  ....22..........
  ....22..........
  ................
  ................
  ................`],
  [lq, bitmap`
  ................
  ................
  .....222222.....
  ....2222222.....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22..22.22...
  ....22222222....
  .....222222.22..
  ................
  ................
  ................
  ................`],
  [lr, bitmap`
  ................
  ................
  ....2222222.....
  ....22222222....
  ....22....22....
  ....22....22....
  ....22222222....
  ....2222222.....
  ....22..22......
  ....22...22.....
  ....22....22....
  ....22.....22...
  ....22......22..
  ................
  ................
  ................`],
  [ls, bitmap`
  ................
  ................
  .....222222.....
  ....2222222.....
  ....22..........
  ....22..........
  ....222222......
  .....222222.....
  ........22......
  ........22......
  ....2222222.....
  .....222222.....
  ................
  ................
  ................
  ................`],
  [lt, bitmap`
  ................
  ................
  ....22222222....
  ....22222222....
  ........22......
  ........22......
  ........22......
  ........22......
  ........22......
  ........22......
  ........22......
  ........22......
  ........22......
  ................
  ................
  ................`],
  [lu, bitmap`
  ................
  ................
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....2222222.....
  .....222222.....
  ................
  ................
  ................
  ................`],
  [lv, bitmap`
  ................
  ................
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  ....22....22....
  .....22..22.....
  .....22..22.....
  ......2222......
  ......2222......
  ................
  ................
  ................
  ................
  ................`],
  [lw, bitmap`
................
................
................
..22........22..
..22........22..
..22........22..
..22........22..
..22...22...22..
..22..2222..22..
..22..2222..22..
..2222..2222....
...222....222...
................
................
................
................`],
  [lx, bitmap`
  ................
  ................
  ....22....22....
  .....22..22.....
  ......2222......
  .......22.......
  .......22.......
  ......2222......
  .....22..22.....
  ....22....22....
  ................
  ................
  ................
  ................
  ................
  ................`],
  [ly, bitmap`
  ................
  ................
  ....22....22....
  .....22..22.....
  ......2222......
  .......22.......
  .......22.......
  .......22.......
  .......22.......
  .......22.......
  .......22.......
  ................
  ................
  ................
  ................
  ................`],
  [lz, bitmap`
  ................
  ................
  ....22222222....
  ....22222222....
  ........22......
  .......22.......
  ......22........
  .....22.........
  ....22..........
  ....22..........
  ....22222222....
  ....22222222....
  ................
  ................
  ................
  ................`],
  [dfa, bitmap`
1111111111111111
1777777777777771
1777777000777771
1777770000077771
1777700770077771
1777700770077771
1777007777007771
1777000000007771
1777000000007771
1770077777700771
1770077777700771
1700777777770071
1700777777770071
1777777777777771
1777777777777771
1111111111111111`],
  [dfb, bitmap`
1111111111111111
1777777777777771
1777000000777771
1777000000077771
1777007777007771
1777007777007771
1777000000077771
1777000000077771
1777007777007771
1777007777007771
1777007777007771
1777000000077771
1777000000777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfc, bitmap`
1111111111111111
1777777777777771
1777700000077771
1777000000077771
1777007777777771
1777007777777771
1777007777777771
1777007777777771
1777007777777771
1777007777777771
1777000000077771
1777700000077771
1777777777777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfd, bitmap`
1111111111111111
1777777777777771
1777000000777771
1777000000077771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777000000077771
1777000000777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfe, bitmap`
1111111111111111
1777777777777771
1777000000007771
1777000000007771
1777007777777771
1777007777777771
1777000000077771
1777000000077771
1777007777777771
1777007777777771
1777007777777771
1777000000007771
1777000000007771
1777777777777771
1777777777777771
1111111111111111`],
  [dff, bitmap`
1111111111111111
1777777777777771
1777000000007771
1777000000007771
1777007777777771
1777007777777771
1777000000077771
1777000000077771
1777007777777771
1777007777777771
1777007777777771
1777007777777771
1777007777777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfg, bitmap`
1111111111111111
1777777777777771
1777700000077771
1777000000077771
1777007777777771
1777007777777771
1777007777777771
1777007700000771
1777007700000771
1777007777007771
1777000000007771
1777700000077771
1777777777777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfh, bitmap`
1111111111111111
1777777777777771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777000000007771
1777000000007771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777777777777771
1777777777777771
1111111111111111`],
  [dfi, bitmap`
1111111111111111
1777777777777771
1777770000777771
1777770000777771
1777777700777771
1777777700777771
1777777700777771
1777777700777771
1777777700777771
1777777700777771
1777770000777771
1777770000777771
1777777777777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfj, bitmap`
1111111111111111
1777777777777771
1777777700007771
1777777700007771
1777777777007771
1777777777007771
1777777777007771
1777777777007771
1777777777007771
1777007777007771
1777000000077771
1777700000077771
1777777777777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfk, bitmap`
1111111111111111
1777777777777771
1777007777007771
1777007770077771
1777007700777771
1777007007777771
1777000077777771
1777000077777771
1777007007777771
1777007700777771
1777007770077771
1777007777007771
1777007777700771
1777777777777771
1777777777777771
1111111111111111`],
  [dfl, bitmap`
1111111111111111
1777777777777771
1777007777777771
1777007777777771
1777007777777771
1777007777777771
1777007777777771
1777007777777771
1777007777777771
1777007777777771
1777007777777771
1777000000007771
1777000000007771
1777777777777771
1777777777777771
1111111111111111`],
  [dfm, bitmap`
1111111111111111
1777777777777771
1770077777700771
1770007777000771
1770000770000771
1770070070070071
1770077000077001
1770077000077001
1770077700777001
1770077777777001
1770077777777001
1770077777777001
1770077777777001
1777777777777771
1777777777777771
1111111111111111`],
  [dfn, bitmap`
1111111111111111
1777777777777771
1777007777007771
1777000777007771
1777000077007771
1777007007007771
1777007700007771
1777007700007771
1777007770007771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777777777777771
1777777777777771
1111111111111111`],
  [dfo, bitmap`
1111111111111111
1777777777777771
1777700000077771
1777000000077771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777000000077771
1777700000077771
1777777777777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfp, bitmap`
1111111111111111
1777777777777771
1777000000077771
1777000000007771
1777007777007771
1777007777007771
1777000000007771
1777000000077771
1777007777777771
1777007777777771
1777007777777771
1777007777777771
1777007777777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfq, bitmap`
1111111111111111
1777777777777771
1777700000077771
1777000000077771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777007700700771
1777000000007771
1777700000070071
1777777777777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfr, bitmap`
1111111111111111
1777777777777771
1777000000077771
1777000000007771
1777007777007771
1777007777007771
1777000000007771
1777000000077771
1777007700777771
1777007770077771
1777007777007771
1777007777700771
1777007777770071
1777777777777771
1777777777777771
1111111111111111`],
  [dfs, bitmap`
1111111111111111
1777777777777771
1777700000077771
1777000000077771
1777007777777771
1777007777777771
1777000000777771
1777700000077771
1777777700777771
1777777700777771
1777000000077771
1777700000077771
1777777777777771
1777777777777771
1777777777777771
1111111111111111`],
  [dft, bitmap`
1111111111111111
1777777777777771
1777000000007771
1777000000007771
1777777700777771
1777777700777771
1777777700777771
1777777700777771
1777777700777771
1777777700777771
1777777700777771
1777777700777771
1777777700777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfu, bitmap`
1111111111111111
1777777777777771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777000000077771
1777700000077771
1777777777777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfv, bitmap`
1111111111111111
1777777777777771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777007777007771
1777700770077771
1777700770077771
1777770000777771
1777770000777771
1777777777777771
1777777777777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfw, bitmap`
1111111111111111
1777777777777771
1777777777777771
1700777777770071
1700777777770071
1700777777770071
1700777777770071
1700777007770071
1700770000770071
1700770000770071
1700007700007771
1770007777000771
1777777777777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfx, bitmap`
1111111111111111
1777777777777771
1777007777007771
1777700770077771
1777770000777771
1777777007777771
1777777007777771
1777770000777771
1777700770077771
1777007777007771
1777777777777771
1777777777777771
1777777777777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfy, bitmap`
1111111111111111
1777777777777771
1777007777007771
1777700770077771
1777770000777771
1777777007777771
1777777007777771
1777777007777771
1777777007777771
1777777007777771
1777777007777771
1777777777777771
1777777777777771
1777777777777771
1777777777777771
1111111111111111`],
  [dfz, bitmap`
1111111111111111
1777777777777771
1777000000007771
1777000000007771
1777777700777771
1777777007777771
1777770077777771
1777700777777771
1777007777777771
1777007777777771
1777000000007771
1777000000007771
1777777777777771
1777777777777771
1777777777777771
1111111111111111`],
  [grey, bitmap`
LLLLLLLLLLLLLLLL
L11111111111111L
L11111111111111L
L11111111111111L
L11111111111111L
L11111111111111L
L11111111111111L
L11111111111111L
L11111111111111L
L11111111111111L
L11111111111111L
L11111111111111L
L11111111111111L
L11111111111111L
L11111111111111L
LLLLLLLLLLLLLLLL`],
  [yellow, bitmap`
LLLLLLLLLLLLLLLL
L66666666666666L
L66666666666666L
L66666666666666L
L66666666666666L
L66666666666666L
L66666666666666L
L66666666666666L
L66666666666666L
L66666666666666L
L66666666666666L
L66666666666666L
L66666666666666L
L66666666666666L
L66666666666666L
LLLLLLLLLLLLLLLL`],
  [green, bitmap`
LLLLLLLLLLLLLLLL
LDDDDDDDDDDDDDDL
LDDDDDDDDDDDDDDL
LDDDDDDDDDDDDDDL
LDDDDDDDDDDDDDDL
LDDDDDDDDDDDDDDL
LDDDDDDDDDDDDDDL
LDDDDDDDDDDDDDDL
LDDDDDDDDDDDDDDL
LDDDDDDDDDDDDDDL
LDDDDDDDDDDDDDDL
LDDDDDDDDDDDDDDL
LDDDDDDDDDDDDDDL
LDDDDDDDDDDDDDDL
LDDDDDDDDDDDDDDL
LLLLLLLLLLLLLLLL`],
  [red, bitmap`
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LL333333333333LL
LL333333333333LL
LL333333333333LL
LL333333333333LL
LL333333333333LL
LL333333333333LL
LL333333333333LL
LL333333333333LL
LL333333333333LL
LL333333333333LL
LL333333333333LL
LL333333333333LL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL`],
  [backgroundGrey, bitmap`
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL`]
);


setSolids([selector, grey, yellow, green]);

let level = 0;
const levels = [
  map`
;;;;;;;;
;wordle;
;;;;;;;;
i_start;
j_choose
l_enter;
;;;;;;;;
;;;;;;;;`,
  map`
_____...
_____...
_____...
_____..-
_____~ab
cdefghij
klmnopqr
stuvwxyz`
];

setMap(levels[level]);

/*
w : up
a : left
s : right
d : down

i : start/nextLevel
j : choose
k : 
l : enter
*/

//basic inputs
onInput("w", () => {
  if (getFirst(selector) != undefined && getFirst(selector).y > 0) {
    getFirst(selector).y -= 1;
  }
});
onInput("a", () => {
  if (getFirst(selector) != undefined && getFirst(selector).x > 0) {
    getFirst(selector).x -= 1;
  }
});
onInput("s", () => {
  if (getFirst(selector) != undefined && getFirst(selector).y < 7) {
    getFirst(selector).y += 1;
  }
});
onInput("d", () => {
  if (getFirst(selector) != undefined && getFirst(selector).x < 7) {
    getFirst(selector).x += 1;
  }
});

//start/next level
onInput("i", () => {
  word = wordList[Math.floor(Math.random() * 150)];
  wordInput = "";
  inputCol = 0;
  setMap(levels[1]);
});

//choose
onInput("j", () => {
  let currentTile = tilesWith(selector)[0];
  //checks valid tile
  if (currentTile.length > 1) {
    if (currentTile[1].type == "~" && wordInput.length > 0) { //backspace
      wordInput = wordInput.slice(0, -1);;
    } else if (currentTile[1].type != "~" && wordInput.length < 5) { //everything else
      wordInput += currentTile[1].type.toUpperCase();
    }
  }

  //updating input display
  //console.log(wordInput)
  for (let i = 0; i < 5; i++) {
    //no more inputs if over 5 tries
    if (inputCol < 5) {
      //removing current tile
      if (getTile(i, inputCol).length > 1) {
        //console.log(getTile(i,inputCol)[0].type);
        // I don't understand why, you don't understand why...
        // (whoever coded this loves 2d/3d arrays)
        getTile(i, inputCol)[0].remove();
      }
      //string -> tile
      if (wordInput.length > i) {
        addSprite(i, inputCol, wordInput[i]);
      }
    }
  }
});
//enter (analysis)
onInput("l", () => {
  //If you wanna see the word I guess...
  console.log(word);

  //word length validity
  if (getFirst(selector) != undefined && wordInput.length == 5 && inputCol != 5) {
    //tracks for a win
    let scoreTracker = 0;
    //checks every letter
    for (let i = 0; i < 5; i++) {
      //testing for a bug with green/yellow not showing etc...
      //console.log(getTile(i,inputCol)[1].type);
      //console.log("wordInput: " + wordInput[i]);
      //console.log("actual word: " + word[i]);

      if (wordInput[i].toLowerCase() == word[i]) { //perfect match - green
        //console.log(i + ": green");
        scoreTracker += 1;
        getTile(i, inputCol)[1].type = "=";
      } else if (word.indexOf(wordInput[i].toLowerCase()) != -1) { //slight match - yellow
        //console.log(i + ": yellow");
        //console.log("index of word for yellow:"+ word.indexOf(wordInput[i].toLowerCase()));
        getTile(i, inputCol)[1].type = "+";
      }
    }

    if (scoreTracker == 5) { //win
      getFirst(selector).remove();
      inputCol = 5;
    } else if (inputCol == 4) { //lose
      getFirst(selector).remove();
      wordInput = "";
    } else { //reset for next attempt
      wordInput = "";
      inputCol += 1;
    }
  }
});